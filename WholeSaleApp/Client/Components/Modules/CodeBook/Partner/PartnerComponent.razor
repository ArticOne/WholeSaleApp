@page "/Partners/{Id:int}"
@page "/Partners/New"
@using WholeSaleApp.Client.Components.Common.LookUp.LookUpComponent
@using WholeSaleApp.Shared.DTOs.CodeBook
@using WholeSaleApp.Shared.DTOs.DTO_Classes.RequestDtos.CodeBook
@using WholeSaleApp.Client.Components.Modules.CrudComponentBase
@using System.Security.Cryptography.X509Certificates

@inherits CrudComponentBase<PartnerDto>
<MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto mt-3" OnClick="Save">Sačuvaj</MudButton>

<MudPaper Class="pa-4 m-4" MaxWidth="500px">
    <MudForm @ref="partnerInputForm">
        <MudTextField @bind-Text="partnerDto.Name" T="string" Label="Naziv partnera" Required="true" RequiredError="Naziv partnera je obavezno polje!" />
        <MudTextField @bind-Text="partnerDto.ShortName" T="string" Label="Skraćeni naziv partnera" Required="true" RequiredError="Skraćeni naziv partnera je obavezno polje!" />
        <LookUpComponent Style="max-width: 300px" LookUpComponentTitle="Mesto" DialogTitle="Izaberite Mesto" TResponseDto="LocationDto" TRequestDto="LocationAddDto" SelectedItem="dto => partnerDto.Location = dto">
            <MudField Style="padding: 5px" Label="Naziv mesta">@partnerDto?.Location?.Name</MudField>
            <MudField Style="padding: 5px" Label="PTT Broj">@partnerDto?.Location?.ZipCode</MudField>
        </LookUpComponent>

        <MudTextField @bind-Text="partnerDto.Address" T="string" Label="Adresa partnera" Required="true" RequiredError="Adresa partnera je obavezno polje!" />
        
        
        <MudDataGrid T="PartnerOfficeDto" Items="@partnerDto.PartnerOffices">
            <Columns>
                <PropertyColumn  Property="x => x.Name"></PropertyColumn>
            </Columns>
        </MudDataGrid>
    </MudForm>
</MudPaper>
